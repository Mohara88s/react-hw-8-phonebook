(this["webpackJsonpreact-hw-8-phonebook"]=this["webpackJsonpreact-hw-8-phonebook"]||[]).push([[0],{22:function(t,e,n){t.exports={form:"RegistrationForm_form__lWAWB",label:"RegistrationForm_label__22k2k"}},23:function(t,e,n){t.exports={ContactList:"ContactList_ContactList__w8aks",item:"ContactList_item__J_orZ",error:"ContactList_error__21mt_",loading:"ContactList_loading__lfAh4"}},28:function(t,e,n){t.exports={form:"LoginForm_form__1cEG-",label:"LoginForm_label__3kIb3"}},29:function(t,e,n){t.exports={link:"AuthNav_link__2lE0k"}},34:function(t,e,n){t.exports={mail:"UserMenu_mail__3NkYp",button:"UserMenu_button__3_5WE"}},45:function(t,e,n){t.exports={ContactForm:"ContactForm_ContactForm__3oBAB"}},46:function(t,e,n){t.exports={Filter:"Filter_Filter__ZNpKd"}},47:function(t,e,n){t.exports={button:"Contact_button__WIJFV"}},48:function(t,e,n){t.exports={container:"Container_container__gysku"}},49:function(t,e,n){t.exports={link:"Navigation_link__3l1Es"}},52:function(t,e,n){t.exports={header:"AppBar_header__15-fH"}},53:function(t,e,n){},90:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(24),s=n.n(c),o=n(5),u=n(6),i=n(18),l=n(8),b=n.n(l),j=n(15),d=n(14),f=n.n(d),O=n(2);f.a.defaults.baseURL="https://connections-api.herokuapp.com";var p,h=function(t){f.a.defaults.headers.common.Authorization="Bearer ".concat(t)},m=function(){f.a.defaults.headers.common.Authorization=""},g=Object(O.c)("auth/register",function(){var t=Object(j.a)(b.a.mark((function t(e){var n,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.post("/users/signup",e);case 3:return n=t.sent,a=n.data,h(a.token),t.abrupt("return",a);case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),x=Object(O.c)("auth/login",function(){var t=Object(j.a)(b.a.mark((function t(e){var n,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.post("/users/login",e);case 3:return n=t.sent,a=n.data,h(a.token),t.abrupt("return",a);case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),v={register:g,logOut:Object(O.c)("auth/logout",Object(j.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.post("/users/logout");case 3:m(),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))),logIn:x,fetchCurrentUser:Object(O.c)("auth/refresh",function(){var t=Object(j.a)(b.a.mark((function t(e,n){var a,r,c,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.getState(),null!==(r=a.auth.token)){t.next=5;break}return console.log("None token"),t.abrupt("return",n.rejectWithValue());case 5:return h(r),t.prev=6,t.next=9,f.a.get("/users/current");case 9:return c=t.sent,s=c.data,t.abrupt("return",s);case 14:t.prev=14,t.t0=t.catch(6);case 16:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e,n){return t.apply(this,arguments)}}())},C={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUserMail:function(t){return t.auth.user.email}},_=n(4),k=Object(O.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},extraReducers:(p={},Object(_.a)(p,v.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(_.a)(p,v.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(_.a)(p,v.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(_.a)(p,v.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0})),p)}).reducer,y=n(22),w=n.n(y),N=n(1);function L(){var t=Object(o.c)(),e=Object(a.useState)(""),n=Object(i.a)(e,2),r=n[0],c=n[1],s=Object(a.useState)(""),u=Object(i.a)(s,2),l=u[0],b=u[1],j=Object(a.useState)(""),d=Object(i.a)(j,2),f=d[0],O=d[1],p=function(t){var e=t.target,n=e.name,a=e.value;switch(n){case"name":return c(a);case"email":return b(a);case"password":return O(a);default:return}};return Object(N.jsxs)("div",{children:[Object(N.jsx)("h2",{children:"Registration page"}),Object(N.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(v.register({name:r,email:l,password:f})),c(""),b(""),O("")},className:w.a.form,autoComplete:"off",children:[Object(N.jsxs)("label",{className:w.a.label,children:["Name",Object(N.jsx)("input",{type:"text",name:"name",value:r,onChange:p})]}),Object(N.jsxs)("label",{className:w.a.label,children:["Mail",Object(N.jsx)("input",{type:"email",name:"email",value:l,onChange:p})]}),Object(N.jsxs)("label",{className:w.a.label,children:["Password",Object(N.jsx)("input",{type:"password",name:"password",value:f,onChange:p})]}),Object(N.jsx)("button",{type:"submit",children:"Registration"})]})]})}function F(){return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(L,{})})}var A=n(28),S=n.n(A);function I(){var t=Object(o.c)(),e=Object(a.useState)(""),n=Object(i.a)(e,2),r=n[0],c=n[1],s=Object(a.useState)(""),u=Object(i.a)(s,2),l=u[0],b=u[1],j=function(t){var e=t.target,n=e.name,a=e.value;switch(n){case"email":return c(a);case"password":return b(a);default:return}};return Object(N.jsxs)("div",{children:[Object(N.jsx)("h2",{children:"Login page"}),Object(N.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(v.logIn({email:r,password:l})),c(""),b("")},className:S.a.form,autoComplete:"off",children:[Object(N.jsxs)("label",{className:S.a.label,children:["Mail",Object(N.jsx)("input",{type:"email",name:"email",value:r,onChange:j})]}),Object(N.jsxs)("label",{className:S.a.label,children:["Password",Object(N.jsx)("input",{type:"password",name:"password",value:l,onChange:j})]}),Object(N.jsx)("button",{type:"submit",children:"Login"})]})]})}function E(){return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(I,{})})}var z=n(43),R=n(44),M=n(57),B=n(56),U=n(92),Z=n(45),q=n.n(Z),J=(Object(O.b)("contacts/add"),Object(O.b)("contacts/changeFilter")),W=(Object(O.b)("contacts/delete"),Object(O.b)("contacts/fetchContactsRequest")),D=Object(O.b)("contacts/fetchContactsSuccess"),P=Object(O.b)("contacts/fetchContactsError"),T=Object(O.b)("contacts/addContactRequest"),V=Object(O.b)("contacts/addContactSuccess"),$=Object(O.b)("contacts/addContactError"),G=Object(O.b)("contacts/deleteContactRequest"),H=Object(O.b)("contacts/deleteContactSuccess"),K=Object(O.b)("contacts/deleteContactError"),Y=n(25),Q=function(t){return t.contacts.items},X=function(t){return t.contacts.filter},tt={getError:function(t){return t.contacts.error},getLoading:function(t){return t.contacts.loading},getContacts:Q,getFilter:X,getFiltredContacts:Object(Y.a)([Q,X],(function(t,e){return t.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}))}))},et=function(t){Object(M.a)(n,t);var e=Object(B.a)(n);function n(){var t;Object(z.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={name:"",number:""},t.hendelInputChange=function(e){t.setState(Object(_.a)({},e.currentTarget.name,e.currentTarget.value))},t.hendelSubmit=function(e){if(e.preventDefault(),t.props.contacts.some((function(e){return e.name.toLowerCase()===t.state.name.toLowerCase()})))return alert("".concat(t.state.name," is already in contacts.")),void t.setState({name:"",number:""});var n={id:Object(U.a)(),name:t.state.name,number:t.state.number};t.props.onAddContact(n),t.setState({name:"",number:""})},t}return Object(R.a)(n,[{key:"render",value:function(){return Object(N.jsxs)("form",{className:q.a.ContactForm,onSubmit:this.hendelSubmit,children:[Object(N.jsxs)("label",{children:["Name",Object(N.jsx)("input",{type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f\u0406\u0456\u0407\u0457\u0490\u0491]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f\u0406\u0456\u0407\u0457\u0490\u0491 ])?[a-zA-Z\u0430-\u044f\u0410-\u042f\u0406\u0456\u0407\u0457\u0490\u0491]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,onChange:this.hendelInputChange,value:this.state.name})]}),Object(N.jsxs)("label",{children:["Number",Object(N.jsx)("input",{type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0,onChange:this.hendelInputChange,value:this.state.number})]}),Object(N.jsx)("button",{type:"submit",children:"Add contact"})]})}}]),n}(a.Component),nt=Object(o.b)((function(t){return{contacts:tt.getContacts(t)}}),(function(t){return{onAddContact:function(e){return t(function(t){return function(){var e=Object(j.a)(b.a.mark((function e(n){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(T()),e.prev=1,e.next=4,f.a.post("/contacts",t);case 4:a=e.sent,r=a.data,n(V(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n($(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()}(e))}}}))(et),at=n(46),rt=n.n(at),ct=function(){var t=Object(o.d)(tt.getFilter),e=Object(o.c)();return Object(N.jsxs)("label",{className:rt.a.Filter,children:["Find contacts by name",Object(N.jsx)("input",{type:"text",name:"filter",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,onChange:function(t){return e(J(t.currentTarget.value))},value:t})]})},st=n(47),ot=n.n(st),ut=function(t){var e=t.id,n=t.name,a=t.number,r=Object(o.c)();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("p",{children:[n," ",a]}),Object(N.jsx)("button",{className:ot.a.button,type:"button",onClick:function(){return r(function(t){return function(){var e=Object(j.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(G()),e.prev=1,e.next=4,f.a.delete("/contacts/".concat(t));case 4:n(H(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n(K(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}(e))},children:"Delete"})]})},it=n(23),lt=n.n(it),bt=function(){var t=Object(o.c)();Object(a.useEffect)((function(){t(function(){var t=Object(j.a)(b.a.mark((function t(e){var n,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(W()),t.prev=1,t.next=4,f.a.get("/contacts");case 4:n=t.sent,a=n.data,e(D(a)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(P(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}())}),[t]);var e=Object(o.d)(tt.getError),n=Object(o.d)(tt.getLoading),r=Object(o.d)(tt.getFiltredContacts);return Object(N.jsxs)(N.Fragment,{children:[n&&Object(N.jsx)("h2",{className:lt.a.loading,children:"thinking..."}),e&&Object(N.jsx)("h2",{className:lt.a.error,children:e}),Object(N.jsx)("ul",{className:lt.a.ContactList,children:r.map((function(t){var e=t.id,n=t.name,a=t.number;return Object(N.jsx)("li",{className:lt.a.item,children:Object(N.jsx)(ut,{id:e,name:n,number:a})},e)}))})]})};var jt=function(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("h2",{children:"Phonebook"}),Object(N.jsx)(nt,{}),Object(N.jsx)("h2",{children:"Contacts"}),Object(N.jsx)(ct,{}),Object(N.jsx)(bt,{})]})},dt=n(48),ft=n.n(dt);function Ot(t){var e=t.children;return Object(N.jsx)("div",{className:ft.a.container,children:e})}var pt=n(17),ht=n(49),mt=n.n(ht),gt=function(){return Object(N.jsx)("nav",{children:Object(N.jsx)(pt.b,{to:"/contacts",exact:!0,className:mt.a.link,children:"Phonebook"})})},xt=n(34),vt=n.n(xt);function Ct(){var t=Object(o.c)(),e=Object(o.d)(C.getUserMail);return Object(N.jsxs)("div",{children:[Object(N.jsx)("p",{className:vt.a.mail,children:e}),Object(N.jsx)("button",{type:"button",onClick:function(){return t(v.logOut())},className:vt.a.button,children:"Logout"})]})}var _t=n(29),kt=n.n(_t);function yt(){return Object(N.jsxs)("div",{children:[Object(N.jsx)(pt.b,{to:"/register",exact:!0,className:kt.a.link,children:"Registation"}),Object(N.jsx)(pt.b,{to:"/login",exact:!0,className:kt.a.link,activeStyle:kt.a.activeLink,children:"Login"})]})}var wt=n(52),Nt=n.n(wt);function Lt(){var t=Object(o.d)(C.getIsLoggedIn);return Object(N.jsxs)("header",{className:Nt.a.header,children:[Object(N.jsx)(gt,{}),t?Object(N.jsx)(Ct,{}):Object(N.jsx)(yt,{})]})}n(87);var Ft=n(53),At=n.n(Ft);var St,It,Et,zt=function(){var t=Object(o.c)();return Object(a.useEffect)((function(){t(v.fetchCurrentUser())}),[t]),Object(N.jsxs)(Ot,{className:At.a.container,children:[Object(N.jsx)(Lt,{}),Object(N.jsxs)(u.c,{children:[Object(N.jsx)(u.a,{path:"/register",component:F}),Object(N.jsx)(u.a,{path:"/login",component:E}),Object(N.jsx)(u.a,{path:"/contacts",component:jt})]})]})},Rt=n(27),Mt=n(16),Bt=n(54),Ut=n.n(Bt),Zt=n(7),qt=Object(O.d)([],(St={},Object(_.a)(St,D,(function(t,e){return e.payload})),Object(_.a)(St,V,(function(t,e){var n=e.payload;return[].concat(Object(Rt.a)(t),[n])})),Object(_.a)(St,H,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),St)),Jt=Object(O.d)(!1,(It={},Object(_.a)(It,W,(function(){return!0})),Object(_.a)(It,D,(function(){return!1})),Object(_.a)(It,P,(function(){return!1})),Object(_.a)(It,T,(function(){return!0})),Object(_.a)(It,V,(function(){return!1})),Object(_.a)(It,$,(function(){return!1})),Object(_.a)(It,G,(function(){return!0})),Object(_.a)(It,H,(function(){return!1})),Object(_.a)(It,K,(function(){return!1})),It)),Wt=Object(O.d)(null,(Et={},Object(_.a)(Et,P,(function(t,e){return e.payload})),Object(_.a)(Et,$,(function(t,e){return e.payload})),Object(_.a)(Et,K,(function(t,e){return e.payload})),Object(_.a)(Et,W,(function(){return null})),Object(_.a)(Et,T,(function(){return null})),Object(_.a)(Et,G,(function(){return null})),Et)),Dt=Object(O.d)("",Object(_.a)({},J,(function(t,e){return e.payload}))),Pt=Object(Zt.b)({items:qt,loading:Jt,error:Wt,filter:Dt}),Tt=Object(Rt.a)(Object(O.f)({serializableCheck:{ignoredActions:[Mt.a,Mt.f,Mt.b,Mt.c,Mt.d,Mt.e]}})),Vt={key:"auth",storage:Ut.a,whitelist:["token"]},$t=Object(O.a)({reducer:{contacts:Pt,auth:Object(Mt.g)(Vt,k)},middleware:Tt,devTools:!1}),Gt=Object(Mt.h)($t),Ht=n(55);s.a.render(Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(o.a,{store:$t,children:Object(N.jsx)(Ht.a,{loading:null,persistor:Gt,children:Object(N.jsx)(pt.a,{children:Object(N.jsx)(zt,{})})})})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.55408b39.chunk.js.map