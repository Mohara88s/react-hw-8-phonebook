(this["webpackJsonpreact-hw-8-phonebook"]=this["webpackJsonpreact-hw-8-phonebook"]||[]).push([[1],{32:function(t,e,n){t.exports={nav:"Navigation_nav__2rUms",link:"Navigation_link__3QPor"}},33:function(t,e,n){t.exports={link:"AuthNav_link__2msaP"}},49:function(t,e,n){t.exports={container:"Container_container__30hm-"}},50:function(t,e,n){t.exports={mail:"UserMenu_mail__GVxUv",button:"UserMenu_button__1vpVY"}},51:function(t,e,n){t.exports={header:"AppBar_header__2plCB"}},52:function(t,e,n){},6:function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"i",(function(){return a})),n.d(e,"j",(function(){return u})),n.d(e,"h",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return l})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return j})),n.d(e,"e",(function(){return d}));var r=n(4),c=(Object(r.b)("contacts/add"),Object(r.b)("contacts/changeFilter")),a=(Object(r.b)("contacts/delete"),Object(r.b)("contacts/fetchContactsRequest")),u=Object(r.b)("contacts/fetchContactsSuccess"),o=Object(r.b)("contacts/fetchContactsError"),i=Object(r.b)("contacts/addContactRequest"),s=Object(r.b)("contacts/addContactSuccess"),l=Object(r.b)("contacts/addContactError"),b=Object(r.b)("contacts/deleteContactRequest"),j=Object(r.b)("contacts/deleteContactSuccess"),d=Object(r.b)("contacts/deleteContactError")},89:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(28),u=n.n(a),o=n(8),i=n(5),s=n(91),l=n(7),b=n(19),j=n(9),d=n(1),f=["children","redirectTo"];function O(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/login":n,c=Object(b.a)(t,f),a=Object(o.d)(j.c.getIsLoggedIn);return Object(d.jsx)(i.b,Object(l.a)(Object(l.a)({},c),{},{children:a?e:Object(d.jsx)(i.a,{to:r})}))}var h=["children","restricted","redirectTo"];function g(t){var e=t.children,n=t.restricted,r=void 0!==n&&n,c=t.redirectTo,a=void 0===c?"/contacts":c,u=Object(b.a)(t,h),s=Object(o.d)(j.c.getIsLoggedIn)&&r;return Object(d.jsx)(i.b,Object(l.a)(Object(l.a)({},u),{},{children:s?Object(d.jsx)(i.a,{to:a}):e}))}var p=n(49),x=n.n(p);function v(t){var e=t.children;return Object(d.jsx)("div",{className:x.a.container,children:e})}var m=n(16),k=n(32),y=n.n(k),C=function(){var t=Object(o.d)(j.c.getIsLoggedIn);return Object(d.jsxs)("nav",{className:y.a.nav,children:[t&&Object(d.jsx)(m.b,{to:"/contacts",exact:!0,className:y.a.link,children:"Phonebook"}),Object(d.jsx)(m.b,{to:"/info",exact:!0,className:y.a.link,children:"Info"})]})},I=n(50),_=n.n(I),U=n(90);function E(){var t=Object(o.c)(),e=Object(o.d)(j.c.getUserMail);return Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{className:_.a.mail,children:e}),Object(d.jsx)(U.a,{variant:"light",type:"button",onClick:function(){return t(j.a.logOut())},children:"Logout"})]})}var L=n(33),w=n.n(L);function N(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(m.b,{to:"/register",exact:!0,className:w.a.link,children:"Registation"}),Object(d.jsx)(m.b,{to:"/login",exact:!0,className:w.a.link,activeStyle:w.a.activeLink,children:"Login"})]})}var F=n(51),S=n.n(F);function z(){var t=Object(o.d)(j.c.getIsLoggedIn);return Object(d.jsxs)("header",{className:S.a.header,children:[Object(d.jsx)(C,{}),t?Object(d.jsx)(E,{}):Object(d.jsx)(N,{})]})}n(85),n(86);var R=n(52),V=n.n(R),A=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,115))})),P=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,116))})),M=Object(r.lazy)((function(){return Promise.all([n.e(4),n.e(5)]).then(n.bind(null,112))})),T=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,117))}));var W,B,q,J=function(){var t=Object(o.c)(),e=Object(o.d)(j.c.getIsFetchingCurrent);return Object(r.useEffect)((function(){t(j.a.fetchCurrentUser())}),[t]),!e&&Object(d.jsx)(v,{className:V.a.container,children:Object(d.jsxs)(r.Suspense,{fallback:Object(d.jsx)(s.a,{animation:"border",variant:"primary"}),children:[Object(d.jsx)(z,{}),Object(d.jsxs)(i.d,{children:[Object(d.jsx)(g,{path:"/register",restricted:!0,children:Object(d.jsx)(A,{})}),Object(d.jsx)(g,{path:"/login",restricted:!0,children:Object(d.jsx)(P,{})}),Object(d.jsx)(O,{path:"/contacts",children:Object(d.jsx)(M,{})}),Object(d.jsx)(i.b,{path:"/info",children:Object(d.jsx)(T,{})}),Object(d.jsx)(i.b,{children:Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(i.a,{to:"/info"})})})]})]})})},G=n(31),Q=n(4),Y=n(18),D=n(53),H=n.n(D),K=n(2),X=n(6),Z=n(10),$=Object(Q.d)([],(W={},Object(K.a)(W,X.j,(function(t,e){return e.payload})),Object(K.a)(W,X.c,(function(t,e){var n=e.payload;return[].concat(Object(G.a)(t),[n])})),Object(K.a)(W,X.g,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),W)),tt=Object(Q.d)(!1,(B={},Object(K.a)(B,X.i,(function(){return!0})),Object(K.a)(B,X.j,(function(){return!1})),Object(K.a)(B,X.h,(function(){return!1})),Object(K.a)(B,X.b,(function(){return!0})),Object(K.a)(B,X.c,(function(){return!1})),Object(K.a)(B,X.a,(function(){return!1})),Object(K.a)(B,X.f,(function(){return!0})),Object(K.a)(B,X.g,(function(){return!1})),Object(K.a)(B,X.e,(function(){return!1})),B)),et=Object(Q.d)(null,(q={},Object(K.a)(q,X.h,(function(t,e){return e.payload})),Object(K.a)(q,X.a,(function(t,e){return e.payload})),Object(K.a)(q,X.e,(function(t,e){return e.payload})),Object(K.a)(q,X.i,(function(){return null})),Object(K.a)(q,X.b,(function(){return null})),Object(K.a)(q,X.f,(function(){return null})),q)),nt=Object(Q.d)("",Object(K.a)({},X.d,(function(t,e){return e.payload}))),rt=Object(Z.b)({items:$,loading:tt,error:et,filter:nt}),ct=Object(G.a)(Object(Q.f)({serializableCheck:{ignoredActions:[Y.a,Y.f,Y.b,Y.c,Y.d,Y.e]}})),at={key:"auth",storage:H.a,whitelist:["token"]},ut=Object(Q.a)({reducer:{contacts:rt,auth:Object(Y.g)(at,j.b)},middleware:ct,devTools:!1}),ot=Object(Y.h)(ut),it=n(54);u.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(o.a,{store:ut,children:Object(d.jsx)(it.a,{loading:null,persistor:ot,children:Object(d.jsx)(m.a,{children:Object(d.jsx)(J,{})})})})}),document.getElementById("root"))},9:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return O})),n.d(e,"b",(function(){return g}));var r=n(17),c=n.n(r),a=n(23),u=n(20),o=n.n(u),i=n(4);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var s,l=function(t){o.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){o.a.defaults.headers.common.Authorization=""},j=Object(i.c)("auth/registration",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/users/signup",e);case 3:return r=t.sent,a=r.data,l(a.token),t.abrupt("return",a);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",n.rejectWithValue(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()),d=Object(i.c)("auth/login",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/users/login",e);case 3:return r=t.sent,a=r.data,l(a.token),t.abrupt("return",a);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",n.rejectWithValue(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()),f={register:j,logOut:Object(i.c)("auth/logout",function(){var t=Object(a.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/users/logout");case 3:b(),t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",n.rejectWithValue(t.t0.message));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()),logIn:d,fetchCurrentUser:Object(i.c)("auth/refresh",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue("None token"));case 4:return l(a),t.prev=5,t.next=8,o.a.get("/users/current");case 8:return u=t.sent,i=u.data,t.abrupt("return",i);case 13:return t.prev=13,t.t0=t.catch(5),t.abrupt("return",n.rejectWithValue(t.t0.message));case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},O={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getAuthError:function(t){return t.auth.authError},getRegError:function(t){return t.auth.regError},getUserMail:function(t){return t.auth.user.email},getIsFetchingCurrent:function(t){return t.auth.isFetchingCurrentUser}},h=n(2),g=Object(i.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1,authError:null,regError:null},extraReducers:(s={},Object(h.a)(s,f.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0,t.regError=null})),Object(h.a)(s,f.register.rejected,(function(t,e){t.regError=e.payload})),Object(h.a)(s,f.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0,t.authError=null})),Object(h.a)(s,f.logIn.rejected,(function(t,e){t.authError=e.payload})),Object(h.a)(s,f.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(h.a)(s,f.fetchCurrentUser.pending,(function(t){t.isFetchingCurrentUser=!0})),Object(h.a)(s,f.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isFetchingCurrentUser=!1})),Object(h.a)(s,f.fetchCurrentUser.rejected,(function(t){t.isFetchingCurrentUser=!1})),s)}).reducer}},[[89,2,3]]]);
//# sourceMappingURL=main.e8d06847.chunk.js.map